<!DOCTYPE html>
<html>
  <head>
    <title>ShriffleMart - Your Online Store</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- jQuery (load before our JavaScript) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <%= link_to root_path, class: "navbar-brand" do %>
          <i class="fas fa-store me-2"></i>ShriffleMart
        <% end %>
        
        <!-- Mobile Hamburger Button -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <!-- Collapsible Navigation Menu -->
        <div class="collapse navbar-collapse" id="navbarNav">
          <!-- Left Side Navigation -->
          <ul class="navbar-nav me-auto">
            <% if logged_in? %>
              <li class="nav-item">
                <%= link_to cart_path, class: "nav-link position-relative" do %>
                  <i class="fas fa-shopping-cart me-1"></i>Cart
                  <% if cart_count > 0 %>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                      <%= cart_count %>
                      <span class="visually-hidden">items in cart</span>
                    </span>
                  <% end %>
                <% end %>
              </li>
            <% end %>
          </ul>
          
          <!-- Right Side Navigation -->
          <ul class="navbar-nav">
            <% if logged_in? %>
              <!-- User Dropdown Menu -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fas fa-user-circle me-1"></i>
                  <span class="d-lg-inline d-none">Welcome, <%= current_user.name.split.first %></span>
                  <span class="d-lg-none">Account</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                  <li>
                    <%= link_to dashboard_index_path, class: "dropdown-item" do %>
                      <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                    <% end %>
                  </li>
                  <li>
                    <%= link_to dashboard_profile_path, class: "dropdown-item" do %>
                      <i class="fas fa-user me-2"></i>Profile
                    <% end %>
                  </li>
                  <li>
                    <%= link_to dashboard_orders_path, class: "dropdown-item" do %>
                      <i class="fas fa-shopping-bag me-2"></i>My Orders
                      <% if current_user.orders.count > 0 %>
                        <span class="badge bg-secondary ms-1"><%= current_user.orders.count %></span>
                      <% end %>
                    <% end %>
                  </li>
                  <li>
                    <%= link_to dashboard_addresses_path, class: "dropdown-item" do %>
                      <i class="fas fa-map-marker-alt me-2"></i>Addresses
                    <% end %>
                  </li>
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <%= link_to logout_path, data: { turbo_method: :delete }, class: "dropdown-item text-danger" do %>
                      <i class="fas fa-sign-out-alt me-2"></i>Logout
                    <% end %>
                  </li>
                </ul>
              </li>
            <% else %>
              <!-- Guest Navigation -->
              <li class="nav-item">
                <%= link_to login_path, class: "nav-link" do %>
                  <i class="fas fa-sign-in-alt me-1"></i>Login
                <% end %>
              </li>
              <li class="nav-item">
                <%= link_to register_path, class: "btn btn-outline-light btn-sm ms-2" do %>
                  <i class="fas fa-user-plus me-1"></i>Register
                <% end %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Flash Messages -->
    <% if flash.any? %>
      <div class="container mt-3">
        <% flash.each do |type, message| %>
          <div class="alert alert-<%= type == 'notice' ? 'success' : 'danger' %> alert-dismissible fade show">
            <%= message %>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        <% end %>
      </div>
    <% end %>

    <!-- Main Content -->
    <main class="container mt-4">
      <%= yield %>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light mt-5">
      <!-- Main Footer Content -->
      <div class="container py-5">
        <div class="row g-4">
          <!-- Company Info -->
          <div class="col-lg-3 col-md-6">
            <div class="footer-section">
              <h5 class="footer-title mb-3">
                <i class="fas fa-store me-2 text-primary"></i>ShriffleMart
              </h5>
              <p class="footer-text mb-3">
                Your trusted online marketplace for quality products at great prices. 
                Shop with confidence and enjoy fast, reliable delivery.
              </p>
              <div class="social-links">
                <a href="#" class="social-link me-3" title="Facebook">
                  <i class="fab fa-facebook-f"></i>
                </a>
                <a href="#" class="social-link me-3" title="Twitter">
                  <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="social-link me-3" title="Instagram">
                  <i class="fab fa-instagram"></i>
                </a>
                <a href="#" class="social-link me-3" title="LinkedIn">
                  <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="#" class="social-link" title="YouTube">
                  <i class="fab fa-youtube"></i>
                </a>
              </div>
            </div>
          </div>
          
          <!-- Quick Links -->
          <div class="col-lg-2 col-md-6">
            <div class="footer-section">
              <h6 class="footer-title mb-3">Quick Links</h6>
              <ul class="footer-links">
                <li><%= link_to "Products", products_path, class: "footer-link" %></li>
                <li><a href="#" class="footer-link">Categories</a></li>
                <li><a href="#" class="footer-link">Deals & Offers</a></li>
                <li><a href="#" class="footer-link">New Arrivals</a></li>
                <li><a href="#" class="footer-link">Best Sellers</a></li>
                <li><a href="#" class="footer-link">Gift Cards</a></li>
              </ul>
            </div>
          </div>
          
          <!-- Customer Service -->
          <div class="col-lg-2 col-md-6">
            <div class="footer-section">
              <h6 class="footer-title mb-3">Customer Service</h6>
              <ul class="footer-links">
                <li><a href="#" class="footer-link">Help Center</a></li>
                <li><a href="#" class="footer-link">Track Your Order</a></li>
                <li><a href="#" class="footer-link">Returns & Refunds</a></li>
                <li><a href="#" class="footer-link">Shipping Info</a></li>
                <li><a href="#" class="footer-link">Size Guide</a></li>
                <li><a href="#" class="footer-link">Contact Us</a></li>
              </ul>
            </div>
          </div>
          
          <!-- Account & Legal -->
          <div class="col-lg-2 col-md-6">
            <div class="footer-section">
              <h6 class="footer-title mb-3">My Account</h6>
              <ul class="footer-links">
                <% if logged_in? %>
                  <li><%= link_to "Dashboard", dashboard_index_path, class: "footer-link" %></li>
                  <li><%= link_to "My Orders", dashboard_orders_path, class: "footer-link" %></li>
                  <li><%= link_to "My Addresses", dashboard_addresses_path, class: "footer-link" %></li>
                  <li><%= link_to "Profile", dashboard_profile_path, class: "footer-link" %></li>
                <% else %>
                  <li><%= link_to "Sign In", login_path, class: "footer-link" %></li>
                  <li><%= link_to "Register", register_path, class: "footer-link" %></li>
                <% end %>
                <li><a href="#" class="footer-link">Privacy Policy</a></li>
                <li><a href="#" class="footer-link">Terms of Service</a></li>
              </ul>
            </div>
          </div>
          
          <!-- Contact & Newsletter -->
          <div class="col-lg-3 col-md-6">
            <div class="footer-section">
              <h6 class="footer-title mb-3">Stay Connected</h6>
              <div class="contact-info mb-3">
                <div class="contact-item mb-2">
                  <i class="fas fa-phone text-primary me-2"></i>
                  <span>+91 98765 43210</span>
                </div>
                <div class="contact-item mb-2">
                  <i class="fas fa-envelope text-primary me-2"></i>
                  <span>support@shrifflemart.com</span>
                </div>
                <div class="contact-item mb-3">
                  <i class="fas fa-clock text-primary me-2"></i>
                  <span>Mon-Fri: 9AM-6PM EST</span>
                </div>
              </div>
              
              <!-- Newsletter Signup -->
              <div class="newsletter-signup">
                <h6 class="mb-2">Newsletter</h6>
                <p class="small text-muted mb-3">Get updates on new products and exclusive offers</p>
                <form class="newsletter-form">
                  <div class="input-group input-group-sm">
                    <input type="email" class="form-control" placeholder="Your email address" required>
                    <button class="btn btn-primary" type="submit">
                      <i class="fas fa-paper-plane"></i>
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Payment & Security -->
      <div class="footer-features bg-primary py-3">
        <div class="container">
          <div class="row g-3 text-center">
            <div class="col-lg-3 col-md-6">
              <div class="feature-item">
                <i class="fas fa-shipping-fast text-white me-2"></i>
                <span class="text-white">Free Shipping Over $50</span>
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="feature-item">
                <i class="fas fa-undo text-white me-2"></i>
                <span class="text-white">30-Day Returns</span>
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="feature-item">
                <i class="fas fa-shield-alt text-white me-2"></i>
                <span class="text-white">Secure Payments</span>
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="feature-item">
                <i class="fas fa-headset text-white me-2"></i>
                <span class="text-white">24/7 Support</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Bottom Footer -->
      <div class="footer-bottom bg-darker py-3">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-md-6">
              <p class="mb-0 text-muted small">
                &copy; <%= Date.current.year %> ShriffleMart. All rights reserved.
              </p>
            </div>
            <div class="col-md-6 text-md-end">
              <div class="payment-methods">
                <span class="text-muted small me-3">We Accept:</span>
                <i class="fab fa-cc-visa text-muted me-2" title="Visa"></i>
                <i class="fab fa-cc-mastercard text-muted me-2" title="Mastercard"></i>
                <i class="fab fa-cc-amex text-muted me-2" title="American Express"></i>
                <i class="fab fa-cc-paypal text-muted me-2" title="PayPal"></i>
                <i class="fab fa-cc-apple-pay text-muted" title="Apple Pay"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>